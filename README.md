# Service Processor

BASH-скрипт для обработки сервисов и создания отчетов на основе данных из GitHub репозитория.

## Описание

Скрипт скачивает файл `list.out` с информацией о сервисах, фильтрует их по статусам, создает отчеты и архивирует результаты.

## Использование

```bash
# С указанием имени сервера
./service_processor.sh my-server

# С именем сервера по умолчанию
./service_processor.sh
```

## Что делает скрипт

1. **Скачивает** файл `list.out` из репозитория GreatMedivack
2. **Фильтрует сервисы** по статусам:
   - `SERVER_DATE_failed.out` - сервисы со статусами Error/CrashLoopBackOff
   - `SERVER_DATE_running.out` - сервисы со статусом Running
3. **Очищает имена** сервисов от постфиксов формата `-xxxxxxxxxx-xxxxxx`
4. **Создает отчет** `SERVER_DATE_report.out` с правами 644
5. **Архивирует** все файлы в `archives/SERVER_DATE.tar.gz`
6. **Очищает** временные файлы
7. **Проверяет** архив на повреждение

## Формат файлов

### Отчет (SERVER_DATE_report.out)
```
Количество работающих сервисов: 5
Количество сервисов с ошибками: 2
Имя системного пользователя: user
Дата: 15/12/24
```

### Архив
Содержит три файла:
- `SERVER_DATE_failed.out`
- `SERVER_DATE_running.out` 
- `SERVER_DATE_report.out`


## Примеры

```bash
# Обработка для сервера production
./service_processor.sh production

# Результат: archives/production_15_12_2024.tar.gz
```

## Безопасность

- Скрипт использует `set -euo pipefail` для строгой обработки ошибок
- Проверяет целостность скачанного файла
- Валидирует созданный архив
- Автоматически очищает временные файлы

  Этот проект **НЕ является открытым ПО**.  
Коммерческое использование **запрещено** без письменного разрешения.  
